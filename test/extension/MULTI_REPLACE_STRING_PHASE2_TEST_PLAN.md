# Multi-Replace-String Tool - Phase 2: Test Planning

**æµ‹è¯•æ—¥æœŸ**: 2025-10-07  
**Phase**: 2 - Test Planning  
**ç›®æ ‡**: åˆ›å»ºå…¨é¢çš„æµ‹è¯•ç”¨ä¾‹åˆ—è¡¨ï¼Œè¦†ç›–æ‰€æœ‰ç¼ºå¤±çš„åŠŸèƒ½

---

## æµ‹è¯•åˆ†ç±»å’Œä¼˜å…ˆçº§

### ğŸ”´ Priority 1: æ ¸å¿ƒé«˜çº§ç‰¹æ€§ï¼ˆå¿…é¡»æµ‹è¯•ï¼‰

#### Category A: å¤§å°å†™ä¸æ•æ„ŸåŒ¹é… (5ä¸ªæµ‹è¯•)
1. **Test A1**: åŸºæœ¬å¤§å°å†™ä¸æ•æ„ŸåŒ¹é…
   - è¾“å…¥: `oldString="hello"`, `caseInsensitive=true`
   - æ–‡ä»¶: "Hello world, HELLO world, hello world"
   - é¢„æœŸ: æ‰€æœ‰3ä¸ªåŒ¹é…éƒ½è¢«æ›¿æ¢

2. **Test A2**: å¤§å°å†™ä¸æ•æ„Ÿ + æ­£åˆ™è¡¨è¾¾å¼
   - è¾“å…¥: `oldString="hello\\s+world"`, `caseInsensitive=true`, `useRegex=true`
   - æ–‡ä»¶: "Hello  World, HELLO   WORLD"
   - é¢„æœŸ: ä¸¤ä¸ªåŒ¹é…éƒ½è¢«æ›¿æ¢

3. **Test A3**: å¤§å°å†™ä¸æ•æ„Ÿ + å¤šæ¬¡å‡ºç°
   - è¾“å…¥: `oldString="test"`, `caseInsensitive=true`
   - æ–‡ä»¶: "Test TEST test TeSt"
   - é¢„æœŸ: æ‰€æœ‰4ä¸ªåŒ¹é…éƒ½è¢«æ›¿æ¢

4. **Test A4**: å¤§å°å†™æ•æ„Ÿï¼ˆé»˜è®¤è¡Œä¸ºï¼‰
   - è¾“å…¥: `oldString="hello"`, `caseInsensitive=false`
   - æ–‡ä»¶: "Hello hello HELLO"
   - é¢„æœŸ: åªæœ‰ "hello" è¢«æ›¿æ¢

5. **Test A5**: å¤§å°å†™ä¸æ•æ„Ÿ + Unicode
   - è¾“å…¥: `oldString="cafÃ©"`, `caseInsensitive=true`
   - æ–‡ä»¶: "CafÃ© CAFÃ‰ cafÃ©"
   - é¢„æœŸ: æ‰€æœ‰åŒ¹é…éƒ½è¢«æ›¿æ¢

#### Category B: æ­£åˆ™è¡¨è¾¾å¼æ¨¡å¼ (8ä¸ªæµ‹è¯•)
6. **Test B1**: åŸºæœ¬æ­£åˆ™è¡¨è¾¾å¼
   - è¾“å…¥: `oldString="\\d+"`, `useRegex=true`
   - æ–‡ä»¶: "user123 and user456"
   - é¢„æœŸ: "123" å’Œ "456" è¢«æ›¿æ¢

7. **Test B2**: æ•è·ç»„æ›¿æ¢ - å•ä¸ªæ•è·ç»„
   - è¾“å…¥: `oldString="user_(\\d+)"`, `newString="customer_$1"`, `useRegex=true`
   - æ–‡ä»¶: "user_123 and user_456"
   - é¢„æœŸ: "customer_123 and customer_456"

8. **Test B3**: æ•è·ç»„æ›¿æ¢ - å¤šä¸ªæ•è·ç»„
   - è¾“å…¥: `oldString="(\\w+)_(\\d+)"`, `newString="$2_$1"`, `useRegex=true`
   - æ–‡ä»¶: "user_123 admin_456"
   - é¢„æœŸ: "123_user 456_admin"

9. **Test B4**: å¤æ‚æ­£åˆ™æ¨¡å¼
   - è¾“å…¥: `oldString="function\\s+(\\w+)\\s*\\("`, `newString="const $1 = ("`, `useRegex=true`
   - æ–‡ä»¶: "function hello() { ... }"
   - é¢„æœŸ: "const hello = () { ... }"

10. **Test B5**: æ— æ•ˆæ­£åˆ™è¡¨è¾¾å¼
    - è¾“å…¥: `oldString="[invalid"`, `useRegex=true`
    - é¢„æœŸ: åº”è¯¥è¿”å›é”™è¯¯æˆ–ä¼˜é›…å¤„ç†

11. **Test B6**: æ­£åˆ™ç‰¹æ®Šå­—ç¬¦è½¬ä¹‰
    - è¾“å…¥: `oldString="\\."`, `useRegex=true`
    - æ–‡ä»¶: "file.txt and file.js"
    - é¢„æœŸ: åªæ›¿æ¢ "." å­—ç¬¦

12. **Test B7**: æ­£åˆ™ + å¤§å°å†™ä¸æ•æ„Ÿ
    - è¾“å…¥: `oldString="hello\\s+world"`, `useRegex=true`, `caseInsensitive=true`
    - æ–‡ä»¶: "Hello World, HELLO WORLD"
    - é¢„æœŸ: ä¸¤ä¸ªéƒ½è¢«æ›¿æ¢

13. **Test B8**: ç©ºæ•è·ç»„
    - è¾“å…¥: `oldString="(\\w*)"`, `newString="[$1]"`, `useRegex=true`
    - æ–‡ä»¶: "hello world"
    - é¢„æœŸ: æ­£ç¡®å¤„ç†ç©ºåŒ¹é…

#### Category C: æ‰§è¡Œé¡ºåºæ§åˆ¶ (7ä¸ªæµ‹è¯•)
14. **Test C1**: åŸºæœ¬é¡ºåºæ§åˆ¶
    - è¾“å…¥: 
      - `{oldString="A", newString="B", order=1}`
      - `{oldString="B", newString="C", order=2}`
    - æ–‡ä»¶: "A B C"
    - é¢„æœŸ: "C C C" (Aâ†’Bâ†’C)

15. **Test C2**: é“¾å¼æ›¿æ¢ - 3æ­¥
    - è¾“å…¥: 
      - `{oldString="old", newString="temp", order=1}`
      - `{oldString="new", newString="old", order=2}`
      - `{oldString="temp", newString="new", order=3}`
    - æ–‡ä»¶: "old new"
    - é¢„æœŸ: "new old" (äº¤æ¢)

16. **Test C3**: ç›¸åŒorderçš„å¤„ç†
    - è¾“å…¥: 
      - `{oldString="A", newString="X", order=1}`
      - `{oldString="B", newString="Y", order=1}`
    - æ–‡ä»¶: "A B C"
    - é¢„æœŸ: ä¸¤ä¸ªæ›¿æ¢éƒ½æ‰§è¡Œï¼ˆé¡ºåºä¸ä¿è¯ï¼‰

17. **Test C4**: è´Ÿæ•°order
    - è¾“å…¥: 
      - `{oldString="A", newString="B", order=-1}`
      - `{oldString="B", newString="C", order=0}`
    - æ–‡ä»¶: "A B"
    - é¢„æœŸ: "C C" (è´Ÿæ•°å…ˆæ‰§è¡Œ)

18. **Test C5**: è·¨æ–‡ä»¶é¡ºåº
    - è¾“å…¥: 
      - `{filePath="file1.txt", oldString="A", newString="B", order=1}`
      - `{filePath="file2.txt", oldString="B", newString="C", order=2}`
    - é¢„æœŸ: é¡ºåºåœ¨å„è‡ªæ–‡ä»¶å†…ç”Ÿæ•ˆ

19. **Test C6**: æ— orderå‚æ•°ï¼ˆé»˜è®¤0ï¼‰
    - è¾“å…¥: 
      - `{oldString="A", newString="B"}` (æ— order)
      - `{oldString="B", newString="C", order=1}`
    - æ–‡ä»¶: "A B"
    - é¢„æœŸ: "B C" (é»˜è®¤order=0å…ˆæ‰§è¡Œ)

20. **Test C7**: å¤§é‡é¡ºåºæ›¿æ¢ï¼ˆæ€§èƒ½ï¼‰
    - è¾“å…¥: 10ä¸ªæœ‰åºæ›¿æ¢
    - é¢„æœŸ: æŒ‰æ­£ç¡®é¡ºåºæ‰§è¡Œï¼Œæ€§èƒ½è‰¯å¥½

#### Category D: ç‰¹æ®Šå­—ç¬¦å¤„ç† (8ä¸ªæµ‹è¯•)
21. **Test D1**: XMLæ•°å­—å®ä½“ - æ¢è¡Œç¬¦ï¼ˆåè¿›åˆ¶ï¼‰
    - è¾“å…¥: `oldString="line1&#10;line2"`
    - æ–‡ä»¶: "line1\nline2"
    - é¢„æœŸ: åŒ¹é…å¹¶æ›¿æ¢

22. **Test D2**: XMLæ•°å­—å®ä½“ - åˆ¶è¡¨ç¬¦ï¼ˆåè¿›åˆ¶ï¼‰
    - è¾“å…¥: `oldString="col1&#9;col2"`
    - æ–‡ä»¶: "col1\tcol2"
    - é¢„æœŸ: åŒ¹é…å¹¶æ›¿æ¢

23. **Test D3**: XMLæ•°å­—å®ä½“ - åå…­è¿›åˆ¶
    - è¾“å…¥: `oldString="line1&#xA;line2"` (&#xA; = \n)
    - æ–‡ä»¶: "line1\nline2"
    - é¢„æœŸ: åŒ¹é…å¹¶æ›¿æ¢

24. **Test D4**: XMLå‘½åå®ä½“
    - è¾“å…¥: `oldString="&lt;tag&gt;"`
    - æ–‡ä»¶: "<tag>"
    - é¢„æœŸ: åŒ¹é…å¹¶æ›¿æ¢

25. **Test D5**: Windowsè·¯å¾„ - åŸºæœ¬
    - è¾“å…¥: `oldString="C:\\Users\\Test"`
    - æ–‡ä»¶: "C:\Users\Test"
    - é¢„æœŸ: åŒ¹é…å¹¶æ›¿æ¢

26. **Test D6**: Windowsè·¯å¾„ - å¤æ‚
    - è¾“å…¥: `oldString="C:\\Users\\Test\\file.txt"`
    - æ–‡ä»¶: "Path: C:\Users\Test\file.txt"
    - é¢„æœŸ: æ­£ç¡®æ›¿æ¢ï¼Œä¸ç ´åè·¯å¾„

27. **Test D7**: åŒåæ–œæ å¤„ç†
    - è¾“å…¥: `oldString="\\\\server\\share"` (\\\\â†’\\)
    - æ–‡ä»¶: "\\server\share"
    - é¢„æœŸ: åŒ¹é…UNCè·¯å¾„

28. **Test D8**: æ··åˆç‰¹æ®Šå­—ç¬¦
    - è¾“å…¥: `oldString="&lt;tag&gt;&#10;content"`
    - æ–‡ä»¶: "<tag>\ncontent"
    - é¢„æœŸ: æ­£ç¡®å¤„ç†å¤šç§å®ä½“

### ğŸŸ¡ Priority 2: æ€§èƒ½å’Œå®é™…åœºæ™¯ï¼ˆé‡è¦ï¼‰

#### Category E: æ€§èƒ½æµ‹è¯• (4ä¸ªæµ‹è¯•)
29. **Test E1**: å¤§æ–‡ä»¶å¤„ç†
    - æ–‡ä»¶å¤§å°: >100KB
    - æ›¿æ¢æ•°é‡: 100+
    - é¢„æœŸ: <2ç§’å®Œæˆ

30. **Test E2**: å¤§é‡åŒ¹é…
    - å•ä¸ªæ›¿æ¢ï¼Œ1000+åŒ¹é…
    - é¢„æœŸ: <3ç§’å®Œæˆ

31. **Test E3**: æ‰¹é‡æ–‡ä»¶å¤„ç†
    - 10ä¸ªæ–‡ä»¶ï¼Œæ¯ä¸ª10ä¸ªæ›¿æ¢
    - é¢„æœŸ: <5ç§’å®Œæˆ

32. **Test E4**: å¤æ‚æ­£åˆ™æ€§èƒ½
    - å¤æ‚æ­£åˆ™æ¨¡å¼ï¼Œå¤§æ–‡ä»¶
    - é¢„æœŸ: æ— æ€§èƒ½é€€åŒ–

#### Category F: å®é™…ä½¿ç”¨åœºæ™¯ (4ä¸ªæµ‹è¯•)
33. **Test F1**: å‡½æ•°é‡å‘½ååœºæ™¯
    - è·¨å¤šä¸ªæ–‡ä»¶é‡å‘½åå‡½æ•°
    - åŒ…æ‹¬å®šä¹‰å’Œè°ƒç”¨
    - é¢„æœŸ: æ‰€æœ‰å¼•ç”¨éƒ½æ›´æ–°

34. **Test F2**: APIç«¯ç‚¹æ›´æ–°
    - æ›´æ–°å¤šä¸ªæ–‡ä»¶ä¸­çš„API URL
    - é¢„æœŸ: ä¸€è‡´æ€§æ›´æ–°

35. **Test F3**: å˜é‡é‡å‘½åï¼ˆæ­£åˆ™ï¼‰
    - ä½¿ç”¨æ­£åˆ™åŒ¹é…å˜é‡å£°æ˜å’Œä½¿ç”¨
    - é¢„æœŸ: æ­£ç¡®é‡å‘½åï¼Œä¸å½±å“å…¶ä»–ä»£ç 

36. **Test F4**: æ‰¹é‡ä¿®å¤typo
    - ä¿®å¤å¤šä¸ªæ–‡ä»¶ä¸­çš„æ‹¼å†™é”™è¯¯
    - å¤§å°å†™ä¸æ•æ„Ÿ
    - é¢„æœŸ: æ‰€æœ‰typoè¢«ä¿®å¤

### ğŸŸ¢ Priority 3: è¾¹ç¼˜æƒ…å†µå¢å¼ºï¼ˆå¯é€‰ä½†æ¨èï¼‰

#### Category G: é«˜çº§è¾¹ç¼˜æƒ…å†µ (4ä¸ªæµ‹è¯•)
37. **Test G1**: é‡å æ›¿æ¢
    - è¾“å…¥: 
      - `{oldString="abc", newString="xyz"}`
      - `{oldString="bcd", newString="123"}`
    - æ–‡ä»¶: "abcd"
    - é¢„æœŸ: æ­£ç¡®å¤„ç†é‡å ï¼ˆç¬¬ä¸€ä¸ªåŒ¹é…ä¼˜å…ˆï¼‰

38. **Test G2**: å¾ªç¯æ›¿æ¢æ£€æµ‹
    - è¾“å…¥: 
      - `{oldString="A", newString="B", order=1}`
      - `{oldString="B", newString="A", order=2}`
    - æ–‡ä»¶: "A B"
    - é¢„æœŸ: "B A" (ä¸æ˜¯æ— é™å¾ªç¯)

39. **Test G3**: æ–‡ä»¶è·¯å¾„è§„èŒƒåŒ–
    - è¾“å…¥: `filePath="./test/../test.txt"`
    - é¢„æœŸ: æ­£ç¡®è§£æä¸º "test.txt"

40. **Test G4**: ç©ºæ–‡ä»¶å¤„ç†
    - æ–‡ä»¶å†…å®¹: ""
    - é¢„æœŸ: è¿”å›"æœªæ‰¾åˆ°åŒ¹é…"ï¼Œä¸æŠ¥é”™

---

## æµ‹è¯•æ–‡ä»¶ç»“æ„

### æ–°å»ºæµ‹è¯•æ–‡ä»¶
```
test/extension/
  â”œâ”€â”€ multi-replace-string-integration.test.ts  (æ–°å»º)
  â”‚   â”œâ”€â”€ Category A: Case Insensitive (5 tests)
  â”‚   â”œâ”€â”€ Category B: Regex Patterns (8 tests)
  â”‚   â”œâ”€â”€ Category C: Execution Order (7 tests)
  â”‚   â”œâ”€â”€ Category D: Special Characters (8 tests)
  â”‚   â”œâ”€â”€ Category E: Performance (4 tests)
  â”‚   â”œâ”€â”€ Category F: Real-world Scenarios (4 tests)
  â”‚   â””â”€â”€ Category G: Advanced Edge Cases (4 tests)
  â””â”€â”€ MULTI_REPLACE_STRING_TOOL_TEST_REPORT.md  (æµ‹è¯•æŠ¥å‘Š)
```

### ç°æœ‰æµ‹è¯•æ–‡ä»¶
```
test/extension/agent/v1/tools/runners/
  â””â”€â”€ multi-replace-string.tool.test.ts  (ä¿æŒä¸å˜ï¼Œ26ä¸ªæµ‹è¯•)
```

---

## æµ‹è¯•æ•°æ®éœ€æ±‚

### éœ€è¦åˆ›å»ºçš„æµ‹è¯•æ–‡ä»¶
1. **basic-text.txt**: ç®€å•æ–‡æœ¬ï¼Œç”¨äºåŸºç¡€æµ‹è¯•
2. **code-sample.js**: JavaScriptä»£ç ï¼Œç”¨äºé‡æ„åœºæ™¯
3. **special-chars.txt**: åŒ…å«æ¢è¡Œã€åˆ¶è¡¨ç¬¦ã€ç‰¹æ®Šå­—ç¬¦
4. **unicode-text.txt**: Unicodeå­—ç¬¦æµ‹è¯•
5. **large-file.txt**: >100KBï¼Œç”¨äºæ€§èƒ½æµ‹è¯•
6. **windows-paths.txt**: Windowsè·¯å¾„æµ‹è¯•

### ä½¿ç”¨ç°æœ‰æ•°æ®åº“
- `Pattern-Search-test-file` æ•°æ®åº“ä¸­çš„æ–‡ä»¶

---

## æˆåŠŸæ ‡å‡†

### æµ‹è¯•é€šè¿‡ç‡
- **ç›®æ ‡**: 100% (40/40 æ–°æµ‹è¯•)
- **å¯æ¥å—**: 95% (38/40)

### æ€§èƒ½æŒ‡æ ‡
- å•ä¸ªæµ‹è¯•: <1ç§’
- æ€§èƒ½æµ‹è¯•: <5ç§’
- æ€»æµ‹è¯•å¥—ä»¶: <30ç§’

### è¦†ç›–ç‡
- åŠŸèƒ½è¦†ç›–: 100%
- ä»£ç è¦†ç›–: >90%
- è¾¹ç¼˜æƒ…å†µè¦†ç›–: >95%

---

## é£é™©ç¼“è§£

### æŠ€æœ¯é£é™©
1. **æ­£åˆ™è¡¨è¾¾å¼å¤æ‚æ€§**
   - ç¼“è§£: ä»ç®€å•åˆ°å¤æ‚é€æ­¥æµ‹è¯•
   - ç¼“è§£: æ·»åŠ è¯¦ç»†çš„é”™è¯¯æ¶ˆæ¯

2. **é¡ºåºæ›¿æ¢é€»è¾‘**
   - ç¼“è§£: è¯¦ç»†è®°å½•æ¯æ­¥çš„ä¸­é—´çŠ¶æ€
   - ç¼“è§£: æ·»åŠ è°ƒè¯•æ—¥å¿—

3. **ç‰¹æ®Šå­—ç¬¦å¤„ç†**
   - ç¼“è§£: æµ‹è¯•æ‰€æœ‰XMLå®ä½“ç±»å‹
   - ç¼“è§£: éªŒè¯è½¬ä¹‰åºåˆ—å¤„ç†

### æµ‹è¯•é£é™©
1. **Mock vs Real**
   - ç¼“è§£: ä½¿ç”¨çœŸå®æ–‡ä»¶ç³»ç»Ÿï¼ˆä¸´æ—¶æ–‡ä»¶ï¼‰
   - ç¼“è§£: Mockåªç”¨äºVS Code API

2. **æµ‹è¯•æ•°æ®ç®¡ç†**
   - ç¼“è§£: æ¯ä¸ªæµ‹è¯•ç‹¬ç«‹çš„æµ‹è¯•æ–‡ä»¶
   - ç¼“è§£: æµ‹è¯•åæ¸…ç†

---

## ä¸‹ä¸€æ­¥è¡ŒåŠ¨

### Phase 3: Test Data Preparation
1. åˆ›å»ºæµ‹è¯•æ•°æ®æ–‡ä»¶
2. å‡†å¤‡æµ‹è¯•æ•°æ®åº“
3. è®¾ç½®æµ‹è¯•ç¯å¢ƒ

**é¢„è®¡æ—¶é—´**: 30åˆ†é’Ÿ
**é¢„è®¡æ–‡ä»¶æ•°**: 6ä¸ªæµ‹è¯•æ•°æ®æ–‡ä»¶

